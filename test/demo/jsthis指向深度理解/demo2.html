<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>
  var o = {
    a: 10,
    b: {
      a: 12,
      fn: function () {
        console.log(this.a) // 12
      }
    }
  }
  o.b.fn()
  // 这里同样也是对象o点出来的，但是同样this并没有执行它，那你肯定会说我一开始说的那些不就都是错误的吗？其实也不是，只是一开始说的不准确，接下来我将补充一句话，我相信你就可以彻底的理解this的指向的问题。
  // 情况1：如果一个函数中有this，但是它没有被上一级的对象所调用，那么this指向的就是window，这里需要说明的是在js的严格版中this指向的不是window，但是我们这里不探讨严格版的问题，你想了解可以自行上网查找。
  // 如果一个函数中有this，这个函数有被上一级的对象所调用，那么this指向的就是上一级的对象。
  // 如果一个函数中有this，这个函数中包含多个对象，尽管这个函数是被最外层的对象所调用，this指向的也只是它上一级的对象

  var o = {
    a:10,
    b:{
      // a:12,
      fn:function(){
        console.log(this.a); //undefined
      }
    }
  }
  o.b.fn();
  // 尽管对象b中没有属性a，这个this指向的也是对象b，因为this只会指向它的上一级对象，不管这个对象中有没有this要的东西。
  // 还有一种比较特殊的情况，例子4：
  var o = {
    a:10,
    b:{
      a:12,
      fn:function(){
        console.log(this.a); //undefined
        console.log(this); //window
      }
    }
  }
  var j = o.b.fn;
  j();
  // 这里this指向的是window，是不是有些蒙了？其实是因为你没有理解一句话，这句话同样至关重要。
  // this永远指向的是最后调用它的对象，也就是看它执行的时候是谁调用的，例子4中虽然函数fn是被对象b所引用，但是在将fn赋值给变量j的时候并没有执行所以最终指向的是window，这和例子3是不一样的，例子3是直接执行了fn。
  // this讲来讲去其实就是那么一回事，只不过在不同的情况下指向的会有些不同，上面的总结每个地方都有些小错误，也不能说是错误，而是在不同环境下情况就会有不同，所以我也没有办法一次解释清楚，只能你慢慢地的去体会。
</script>
</body>
</html>
